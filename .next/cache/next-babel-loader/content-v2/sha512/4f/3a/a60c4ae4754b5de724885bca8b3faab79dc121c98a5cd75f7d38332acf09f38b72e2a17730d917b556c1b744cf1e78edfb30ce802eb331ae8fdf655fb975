{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Link from 'next/link';\nimport router from \"next/router\";\nimport React, { memo, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport ButtonComponent from '../components/button';\nimport Card from '../components/card/card';\nimport FromGroup from '../components/form-group/form-group';\nimport Input from '../components/input/input';\nimport Page from \"../components/page/page\";\nimport { Login } from '../redux/entry/entryActions';\n\nfunction LoginPage(props) {\n  var _errors$email, _errors$password;\n\n  var _useIntl = useIntl(),\n      f = _useIntl.formatMessage;\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors,\n      clearErrors = _useForm.clearErrors,\n      setError = _useForm.setError;\n\n  useEffect(function () {\n    clearErrors();\n\n    for (var key in props.Entry.errorMessages.errors) {\n      setError(key, {\n        message: props.Entry.errorMessages.errors[key].join('\\n')\n      });\n    }\n  }, []);\n  useEffect(function () {\n    if (props.Entry.isLoged) {\n      router.push('/orders');\n    }\n  }, [props.Entry.isLoged]);\n\n  var submit = function submit(data) {\n    props.Login('auth/login', JSON.stringify(data), {\n      'content-type': 'application/json'\n    });\n  };\n\n  return /*#__PURE__*/_jsx(Page, {\n    className: \"h-100\",\n    children: /*#__PURE__*/_jsxs(Card, {\n      className: \"login-card bg-white p-sm\",\n      style: {\n        display: 'block'\n      },\n      children: [/*#__PURE__*/_jsx(Card.Header, {\n        style: {\n          textAlign: 'center'\n        },\n        text: f({\n          id: 'signin'\n        })\n      }), /*#__PURE__*/_jsxs(Card.Body, {\n        className: \"p-none\",\n        children: [/*#__PURE__*/_jsxs(\"form\", {\n          className: \"login-form\",\n          onSubmit: handleSubmit(submit),\n          children: [/*#__PURE__*/_jsx(FromGroup, {\n            label: f({\n              id: 'email'\n            }),\n            bodyClass: \"bg-bg w-100\",\n            error: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message,\n            className: \"mb-sm\",\n            children: /*#__PURE__*/_jsx(Input, {\n              Ref: register({\n                required: {\n                  value: true,\n                  message: f({\n                    id: 'emailerror'\n                  })\n                } //  pattern:/^[a-zA-Z0-9.!#$%&'+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)$/\n\n              }),\n              type: \"email\",\n              name: \"email\"\n            })\n          }), /*#__PURE__*/_jsx(FromGroup, {\n            label: f({\n              id: 'password'\n            }),\n            bodyClass: \"bg-bg w-100\",\n            error: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message,\n            className: \"mb-lg\",\n            children: /*#__PURE__*/_jsx(Input, {\n              Ref: register({\n                required: {\n                  value: true,\n                  message: f({\n                    id: 'pass-requir'\n                  })\n                } // pattern:/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/\n\n              }),\n              type: \"password\",\n              name: \"password\"\n            })\n          }), /*#__PURE__*/_jsx(ButtonComponent, {\n            type: \"submit\",\n            className: \"w-100 mt-xs mb-sm\",\n            label: f({\n              id: 'login'\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mt-xs\",\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            children: f({\n              id: 'no-account'\n            })\n          }), /*#__PURE__*/_jsx(Link, {\n            href: \"/register\",\n            children: /*#__PURE__*/_jsx(\"a\", {\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: \"color-yellow\",\n                style: {\n                  cursor: 'pointer'\n                },\n                children: f({\n                  id: 'signup'\n                })\n              })\n            })\n          })]\n        })]\n      })]\n    })\n  });\n}\n\nvar mapDispatchToProp = {\n  Login: Login\n};\n\nvar mapStateToProp = function mapStateToProp(state) {\n  return {\n    Entry: state.entry\n  };\n};\n\nexport default connect(mapStateToProp, mapDispatchToProp)( /*#__PURE__*/memo(LoginPage));","map":null,"metadata":{},"sourceType":"module"}